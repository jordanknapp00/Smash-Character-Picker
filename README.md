# Smash Character Picker (v10.1)

A program which generates a random matchup for Super Smash Bros. using a tier list. For those of us who can never decide what character to play, but are unsatisfied with the unfair matchups generated by Smash's built-in random option. Nobody wants to have a matchup like Pyra/Mythra vs. Dr. Mario, but it seems to happen all too often with the built-in random option. Thus, I created this program. It loads a tier list from a `.txt` file and generates a matchup that can be considered fair by the rules of that tier list. There are various systems included to generate novel matchups throughout a session.

This version of the program (v10.1) sees the program essentially having been rewritten from scratch. Whereas previous versions had the vast majority of the code in a single file, this version has spread out different features, trying to follow the single responsibility principle.

Also new in this version is the ability to change the chances of being bumped up a tier or two. More details on what exactly that means in later sections.

## General Usage

The program is fairly simple to use. Simply load a tier list file. If the file is valid, then you're ready to go. Hit the "Generate" button to generate a matchup. Two players can swap fighters if they want to; simply check the boxes on the right side of the window corresponding to the fighters to swap, and hit the "Switch" button.

Under normal circumstances, a player cannot get the same fighter twice in one session. There are two exceptions to this: first, battles can be skipped using the "Skip" button, which is to the right of the "Generate" button. If a battle is skipped, then a player will be able to get that fighter again at a later point. The second exception is if the fighter is part of that player's favorites list. More on what exactly that means below. The inability to get the same fighter twice (except under the previously described circumstances) is what allows the program to generate novel matchups and keep your session of Smash interesting.

### Settings

At the bottom of the window, to the right of the generate, skip, and debug buttons, you'll find the option to set the number of players present. This determines the number of fighters that will be chosen, of course.

#### Tier Chances

On the left side of the window, you'll find various settings that affect the program. First, you can adjust the chance of any individual tier being selected. Note that when you adjust the tier chance settings, the values must add up to 100 and you must hit the "Apply tier chance settings" button for them to take effect. You'll know that your percentages have taken effect because the program will produce a popup telling you so.

#### Bump Chances

Below the tier chance settings is the bump settings. When a battle generated, a tier is chosen according to the percentages defined by the tier chance settings. However, each player has a chance to be bumped *up* either one or two tiers. For example, the chosen tier may be Mid A tier, but players could conceivably be bumped up to Upper A or Lower S tiers. The chances of being bumped up one or two tiers, or simply staying in the same tier that was initially chosen, is defined by the bump chances. These are also applied by hitting the "Apply tier chance settings" button, and like the tier chances, these values must add up to 100. Note that while players can have their tiers bumped up, they will never be bumped down.

#### The "Cannot Get" buffer

Below the tier chance settings, you'll find settings for the "Cannot Get" buffer. After each battle, the fighters that each player got are added to the "Cannot Get" buffer, and they cannot be gotten again *by any player* for a set amount of battles. This is the size of the "Cannot Get" buffer. The default is 5, but it can safely be set higher than this depending on how many fighters are being used, and thus how many possible matchups there are. There are also separate settings to determine whether or not SS and/or S tier characters are allowed in the buffer. If a particular tier list has a particularly small SS or S tier, it may be desirable to not put those characters in the "Cannot Get" buffer.

**Note**: If the "Cannot Get" buffer's size is set too high, then it could be possible for there to not be any available matchups, because all the fighters are in the "Cannot Get" buffer. In this situation, the program will fail to generate a matchup. An error message will be printed to the results field, and more information will be printed to the debug log. It is important to set your "Cannot Get" buffer to a size where this will not happen. If this does happen, you are best off simply closing the program and restarting it, being sure to set the "Cannot Get" buffer size lower.

## Tier List Files

Tier lists are stored in a simple `.txt` file. Check out the provided tier list files for an example of how to format it. Tiers are simply denoted by the name of the tier, followed by an equals sign with a space on both sides, and then a comma-separated list of fighters that belong in that tier. Tiers can be listed in any order, and tiers can be excluded entirely if there are no fighters in that tier for your particular tier list. Note that each tier is essentially split into three sub-tiers. There's an Upper A, Mid A, and Lower A. This applies to all tiers.

Note that the program works best when the tiers are consecutive, i.e. putting gaps in the tier list isn't advised. The example `reddit tier list.txt` that is provided does this, as it simply directly copies the r/SmashBrosUltimate official tier list. It shouldn't cause issues with the program, but you may not get as many novel matchups as you would if the tiers were consecutive, because being bumped up that many tiers is impossible.

The program will search its directory for `tier list.txt` upon launch, and prompt the user as to whether or not it should be loaded, if the file is found at all. Once a tier list is loaded, the program can be used.

You also have the ability to put comments in a tier list file. Simply start a line with a `#`, and the program will ignore it when loading the tier list, thus allowing the line to function as a comment. Any line that is not blank or not recognized as a tier, setting, or exclusion/favorite list will cause an error when the tier list is loaded.

### Exclusion and Favorite Lists

Each player gets their own exclusion and favorite lists. The exclusion list is simply a list of fighters that a particular player *never* wants to be able to get. For those fighters that you just can't stand. Under no circumstances will a player be able to get a fighter that's on their exclusion list.

The favorite list, on the other hand, is a list of that player's favorite fighters. As described above, normally a player can never get the same fighter twice in the same session. One exception to that is if that fighter is on that player's favorite list. Note that you'll still have to wait however many battles you've set the "Cannot Get" buffer to before you can get the same fighter for a second time.

### Defining Settings in a Tier List File

The various settings described above can also be defined in a tier list file. Once again, see one of the example tier list files to see exactly how it works. For posterity, the settings are described below.

- `players = ` will allow you to set the number of players. A number between 2 and 8 is required.
- `cannot get size = ` will allow you to set the size of the "Cannot Get" buffer. A number between 0 and 15 is required.
- `allow ss in cannot get = ` and `allow s in cannot get = ` allow you to determine those settings. A value of true or false is required.
- `tier chances = ` will allow you to set the custom tier chances automatically. Simply provide a comma-separated list of 8 numbers, and ensure they add up to 100. The numbers are just the percentages of each tier, starting from SS down to F. If the given values are valid, the program will apply them as soon as you open the tier list.
- `bump chances = ` will allow you to set custom bump chances automatically. Simple provide a comma-separated list of 3 numbers; the chance of staying the same tier, bumping up one tier, and bumping up two tiers. These values must add up to 100. If the given values are valid, the program will apply them as soon as you open the tier list.

## Other Features

### Soundboard

The program comes with a built-in soundboard. It contains 21 sound effects that my brothers and I often reference while playing Smash. Rather than simply quoting movies, TV shows, and YouTube videos, now you can hear the exact sound effect!

Some buttons actually contain multiple sound effects in one. The included sound effects labeled "Ghoul" and "Cheater" will play one of four and one of five random sound effects, respectively. You can also right click on those buttons and select exactly which sound effect you want to be played.

#### Inserting Your Own Sounds

Thanks to the soundboard optimizations in v9.0, inserting your own sound effects is made much easier, though it still requires modifying the source code. First, you'll want to go to the /src/sounds folder. Your sound files should be stored in `.wav` format. Simply place any sound files you wish to include in this folder. Once you've done that, then you need to make some quick modifications to the code.

The soundboard code is stored in the `ui` package, in the class `SoundboardWindow`.

You will see a list of `JButton` objects as instance variables for this class, each of which corresponds to a sound effect. The first order of business for inserting your own sounds will be to create a `JButton` for each of your sound effects. In the constructor for the `SoundboardWindow` class, you'll find roughly 20 lines that set up the window itself. Below that, you'll find the code that initializes the buttons.

You'll find a line with the code `panel.setLayout(new GridLayout(0, 3));`. This will place the buttons in a grid with an indeterminate number of rows and three columns. You may want to modify this depending on how many buttons you have. The number of columns should be a multiple of how many sound effects you intend to include. The more you intend to include, the more columns you'll want, as the soundboard window always stays the same size.

Below that is where the buttons are actually initialized. Initializing a button takes two lines. First, you have to actually create the `JButton` object. This is as simple as `<button name> = new JButton("<button title>");`. On the next line, you'll need to define the `ActionListener`, the class which determines what the button does when it's pressed. As mentioned above, two types of button are included, single sound and multi-sound buttons. These action listeners are defined in the inner classes `SingleSoundButton` and `MultiSoundButton`. Defining a single sound button is easy. All you need to do is include the line `<button name>.addActionListener(new SingleSoundButton("/sounds/<sound file>.wav"));`.

Adding a multi-sound button is slightly more complex. Creating the `JButton` object is done in the same way as a single sound button. After that, you'll need to define two `String` arrays. One will hold the locations of the sound files, and the other will hold the names of the sound effects. Adding the action listener is done with `<button name>.addActionListener(new MultiSoundButton(<sound file array>, <sound name array>));`.

Once that's done, simply add each `JButton` to the soundboard like this: `panel.add(<button name>);`.

If this tutorial is insufficient, you can use the existing source code as an example, too.

### Stat Tracking

The program comes with a built-in stat-tracking system. After a tier list file is loaded, you can open the stats window by simply hitting the button labeled "Stats", which is located in the bottom-right corner of the window. When a battle is generated, the stats window is updated. For each player, it will display their own win/loss ratio as that fighter, as well as that fighter's overall win/loss ratio.

After a battle, you can select which player won, keeping track of each player's win/loss ratio as each character. If you accidentally select the wrong winner, simply reselect with the correct winner. The program will remove the previously-entered result and only count the correct one.

#### Stat Lookup

There is also the functionality to look up stats. You can look up the stats of an individual fighter, displaying each player's winrate when playing as that fighter, as well as the fighter's overall winrate. You can sort the fighters by their overall winrate, as well as their winrate when being played by a particular player. You can also sort the fighters by the total number of battles they've appeared in. Finally, you can see each player's overall winrate compared to one another.

#### Stat Modification

Did you accidentally select the wrong winner? As mentioned above, this is not a problem. Simply selecting the correct player and hitting the select winner button again will solve the problem, so long as you haven't generated a new battle yet. If you did generate a new battle, you can use the modify functionality within the lookup menu. The modify menu lets you adjust each player's individual winrate. You can also rename the character and delete them from the system, though you must also rename/remove the character in the tier list file for this to be permanent.

Adding new fighters to the system is easy. Simply add the fighters to your tier list file, and when the stats window is opened, they will automatically be added to the system.

#### Stat Files

Statistics are stored in a file called `smash stats.sel`, which is stored in the same directory as the program and tier list file. The stats file simply stores the HashMap object which represents the stats system internally. This means that it is not editable with a text editor. The Smash Character Picker program is only designed to read `smash stats.sel`. I did write a separate program just designed for reading stats files, not writing them, but that is not included here. If there is any kind of demand for it, I'll release it somewhere.

This version of the program comes with a `smash stats.sel` file. It is intended to be used with `tier list.txt`, not `reddit tier list.txt`.
